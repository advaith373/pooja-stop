<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>POOJA STOP — Market</title>
<meta name="description" content="POOJA STOP — curated pooja essentials. Swiggy-like layout, paper-template colors." />
<style>
  :root{
    /* theme derived from your paper template */
    --primary: #8a2b0a;      /* deep warm brown */
    --accent:  #ffd27a;      /* warm gold */
    --muted:   #6b2b0b;      /* darker text */
    --card-bg: rgba(255,255,255,0.96);
    --glass: rgba(255,255,255,0.06);
    --shadow: 0 10px 30px rgba(0,0,0,0.18);
    --max-width: 1200px;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
    background: linear-gradient(180deg,#f7ebe0,#f3ded1);
    color: #222;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.35;
  }

  /* Header similar layout to Swiggy */
  header.site-head{
    position:sticky; top:0; z-index:1200;
    backdrop-filter: blur(6px);
    background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.55));
    border-bottom: 1px solid rgba(0,0,0,0.04);
  }
  .topbar{
    max-width:var(--max-width);
    margin:0 auto;
    padding:14px 18px;
    display:flex; align-items:center; gap:16px;
  }
  .brand{
    display:flex; align-items:center; gap:12px; cursor:pointer;
  }
  .brand .logo{
    width:44px; height:44px; border-radius:8px;
    background-image: url('/mnt/data/Web template.png');
    background-size: cover;
    background-position:center;
    box-shadow: 0 6px 18px rgba(0,0,0,0.18);
    display:flex; align-items:center; justify-content:center;
    font-weight:900; color:#7a0010;
  }
  .brand h1{ font-size:18px; color:var(--muted); letter-spacing:1px; margin:0 }
  .search-area{
    flex:1; display:flex; align-items:center; gap:12px; margin-left:8px;
  }
  .search-box{
    flex:1; display:flex; align-items:center; gap:10px; padding:10px 12px;
    border-radius:10px; background:#fff; box-shadow: var(--shadow);
    border:1px solid rgba(0,0,0,0.04);
  }
  .search-box input{
    border:0; outline:none; font-size:15px; width:100%;
  }
  .actions{ display:flex; gap:10px; align-items:center }
  .action-btn{ padding:8px 10px; border-radius:8px; background:transparent; border:1px solid rgba(0,0,0,0.06); cursor:pointer}

  /* main layout */
  .wrap{
    max-width:var(--max-width);
    margin:18px auto;
    padding:0 18px;
  }

  /* categories (horizontal chips) */
  .categories{
    display:flex; gap:10px; overflow:auto; padding:12px 6px; margin-bottom:12px;
  }
  .chip{
    flex:0 0 auto; padding:8px 12px; border-radius:22px; background:var(--card-bg);
    border:1px solid rgba(0,0,0,0.04); cursor:pointer; font-weight:600; color:var(--muted);
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  }
  .chip.active{ background: linear-gradient(90deg,var(--accent), #f6c86a); color:#6b2b0b; box-shadow:0 10px 30px rgba(0,0,0,0.12) }

  /* main area with left column (list) and right cart */
  .layout{
    display:grid;
    grid-template-columns: 1fr 340px;
    gap:20px;
    align-items:start;
  }

  /* vendor / item cards grid */
  .listing{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(260px,1fr));
    gap:18px;
  }
  .vendor{
    background:var(--card-bg); border-radius:12px; padding:12px; box-shadow:var(--shadow); border: 1px solid rgba(0,0,0,0.04);
    display:flex; gap:12px; align-items:flex-start;
  }
  .vendor .thumb{
    width:110px; height:90px; border-radius:10px; background:#eee; overflow:hidden; flex-shrink:0;
  }
  .vendor .thumb img{ width:100%; height:100%; object-fit:cover; display:block }
  .vendor .meta{ flex:1 }
  .vendor h3{ margin:0 0 6px 0; font-size:16px; color:var(--muted) }
  .vendor .tags{ font-size:13px; color:#6b6b6b; margin-bottom:6px }
  .vendor .info{ display:flex; gap:8px; align-items:center; font-size:13px; color:#444; margin-top:6px }
  .price-badge{ margin-left:auto; background: linear-gradient(180deg,var(--accent), #f0b85a); padding:6px 8px; border-radius:8px; font-weight:700; color:#6b2b0b; box-shadow: 0 6px 18px rgba(0,0,0,0.08) }

  .vendor .cta { margin-top:8px; display:flex; gap:8px; align-items:center }
  .btn-add{ padding:8px 12px; border-radius:10px; border:none; background:var(--primary); color:#fff; cursor:pointer; }

  /* right sidebar cart */
  .cart-panel{
    position:sticky; top:92px; background:linear-gradient(180deg, #fff, #fff); border-radius:12px; padding:12px; box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,0.04);
    height:fit-content;
  }
  .cart-panel h4{ margin:0 0 8px 0; color:var(--muted) }
  .cart-items{ display:flex; flex-direction:column; gap:8px; max-height:360px; overflow:auto; padding-right:6px }
  .cart-row{ display:flex; gap:8px; align-items:center; justify-content:space-between; padding:6px; border-radius:8px; background:#faf7f4; border:1px solid rgba(0,0,0,0.03) }
  .cart-row .left{ display:flex; gap:8px; align-items:center }
  .cart-row img{ width:48px; height:48px; border-radius:6px; object-fit:cover }
  .cart-summary{ margin-top:10px; font-weight:700; display:flex; justify-content:space-between; align-items:center }
  .checkout{ margin-top:10px; padding:10px; border-radius:8px; background:linear-gradient(90deg,var(--accent), #f0b85a); color:#6b2b0b; font-weight:700; border:none; cursor:pointer; width:100% }

  /* mobile adjustments */
  @media (max-width:980px){
    .layout{ grid-template-columns: 1fr; }
    .cart-panel{ position:fixed; right:10px; bottom:10px; width:92%; max-width:420px; z-index:1300; }
  }

  /* small mobile */
  @media (max-width:560px){
    .topbar{ padding:10px }
    .brand h1{ font-size:16px }
    .vendor .thumb{ width:96px; height:76px }
    .vendor h3{ font-size:15px }
  }

  /* subtle utilities */
  .muted{ color:#6b6b6b; font-size:13px }
  .small{ font-size:13px; color:#555 }
  .center{ text-align:center }
</style>
</head>
<body>

<header class="site-head">
  <div class="topbar">
    <div class="brand" onclick="location.hash='home'">
      <div class="logo" title="POOJA STOP">PS</div>
      <div>
        <h1>POOJA STOP</h1>
        <div class="small muted">Pooja essentials & combos</div>
      </div>
    </div>

    <div class="search-area" style="min-width:260px">
      <div class="search-box">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#b96b2b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#b96b2b" stroke-width="2"/></svg>
        <input id="search-input" placeholder="Search items, combos, or rituals (eg. diya, kumkum, festival)"/>
        <select id="sort" style="border:0;background:transparent;outline:none">
          <option value="popular">Popular</option>
          <option value="price_low">Price: Low</option>
          <option value="price_high">Price: High</option>
        </select>
      </div>
    </div>

    <div class="actions">
      <button class="action-btn" id="saved">Saved</button>
      <button class="action-btn" id="account">Sign in</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="categories" id="categories">
    <!-- chips populated by JS -->
  </div>

  <div class="layout">
    <div>
      <div class="listing" id="listing">
        <!-- vendor cards populated by JS -->
      </div>
    </div>

    <aside class="cart-panel" id="cartPanel" aria-live="polite">
      <h4>Your Cart <span id="cartCount" style="font-weight:700;color:var(--primary);">0</span></h4>
      <div class="cart-items" id="cartItems">
        <div class="center muted">No items yet — add from the list</div>
      </div>
      <div class="cart-summary">
        <span>Total</span><span id="cartTotal">₹ 0</span>
      </div>
      <button class="checkout" id="checkoutBtn">Place Order (Demo)</button>
    </aside>
  </div>
</main>

<script>
/* ---------- Sample data (pooja-appropriate items/bundles) ---------- */
const DATA = [
  { id:'v1', name:'Brass Diya — Small', tags:['Diya','Brass'], eta:'10-15 min', rating:4.8, price:150, img:'https://images.unsplash.com/photo-1550258987-190a2d41a8ba?q=80&w=800&auto=format&fit=crop' },
  { id:'v2', name:'Agarbatti Pack (50)', tags:['Incense'], eta:'5-10 min', rating:4.6, price:60, img:'https://images.unsplash.com/photo-1574680096145-94454d4b6f4c?q=80&w=800&auto=format&fit=crop' },
  { id:'v3', name:'Kumkum & Haldi Set', tags:['Essentials'], eta:'5-10 min', rating:4.7, price:40, img:'https://images.unsplash.com/photo-1541661538399-7f4e9b0f5f5e?q=80&w=800&auto=format&fit=crop' },
  { id:'v4', name:'Fresh Marigold Garland', tags:['Flowers'], eta:'20-30 min', rating:4.5, price:80, img:'https://images.unsplash.com/photo-1505577058444-a3dabf54f4f0?q=80&w=800&auto=format&fit=crop' },
  { id:'v5', name:'Camphor Box (Kapoor)', tags:['Camphor'], eta:'5-10 min', rating:4.6, price:25, img:'https://images.unsplash.com/photo-1593005513054-c6a5a6f4a9e7?q=80&w=800&auto=format&fit=crop' },
  { id:'v6', name:'Sandalwood Paste (Chandan)', tags:['Chandan'], eta:'5-10 min', rating:4.9, price:120, img:'https://images.unsplash.com/photo-1542345812-d98b5cd6cf98?q=80&w=800&auto=format&fit=crop' },
  { id:'v7', name:'Brass Thali (Medium)', tags:['Plate','Brass'], eta:'20-30 min', rating:4.4, price:450, img:'https://images.unsplash.com/photo-1558980664-10d16b1b6c5f?q=80&w=800&auto=format&fit=crop' },
  { id:'v8', name:'Pooja Coconut (Fresh)', tags:['Offerings'], eta:'5-15 min', rating:4.3, price:60, img:'https://images.unsplash.com/photo-1509223197845-458d87318791?q=80&w=800&auto=format&fit=crop' },
  { id:'v9', name:'Small Ghanta (Bell)', tags:['Accessories'], eta:'5-15 min', rating:4.6, price:220, img:'https://images.unsplash.com/photo-1509223197845-458d87318791?q=80&w=800&auto=format&fit=crop' },
  { id:'v10', name:'Pooja Organizer Box', tags:['Storage'], eta:'3-7 days', rating:4.7, price:999, img:'https://images.unsplash.com/photo-1589710758294-76f6d17a1f89?q=80&w=800&auto=format&fit=crop' },
  { id:'v11', name:'Festival Combo (Diya+Garland+Camphor)', tags:['Combo','Festival'], eta:'1 day', rating:4.8, price:699, img:'https://images.unsplash.com/photo-1490645935967-10de6ba17061?q=80&w=800&auto=format&fit=crop' },
];

/* ---------- categories auto-derived ---------- */
const categories = Array.from(new Set(DATA.flatMap(d=>d.tags))).sort();
categories.unshift('All');

/* ---------- Render categories ---------- */
const categoriesEl = document.getElementById('categories');
categories.forEach(cat=>{
  const chip = document.createElement('div');
  chip.className = 'chip' + (cat==='All' ? ' active' : '');
  chip.textContent = cat;
  chip.dataset.cat = cat;
  chip.addEventListener('click', ()=> {
    document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
    chip.classList.add('active');
    filterAndRender();
  });
  categoriesEl.appendChild(chip);
});

/* ---------- Render listing ---------- */
const listing = document.getElementById('listing');

function createVendorCard(item){
  const el = document.createElement('div');
  el.className = 'vendor';
  el.innerHTML = `
    <div class="thumb"><img src="${item.img}" alt="${item.name}"></div>
    <div class="meta">
      <h3>${item.name}</h3>
      <div class="tags">${item.tags.join(' • ')}</div>
      <div class="info">
        <div class="rating">⭐ ${item.rating}</div>
        <div class="eta"> • ${item.eta}</div>
        <div class="price-badge">${formatPrice(item.price)}</div>
      </div>
      <div class="cta">
        <button class="btn-add" data-id="${item.id}">Add</button>
        <button class="action-btn" data-view="${item.id}">View</button>
      </div>
    </div>
  `;
  return el;
}

function formatPrice(n){ return '₹ ' + n; }

function renderListing(items){
  listing.innerHTML = '';
  if(!items.length){
    listing.innerHTML = '<div class="center muted">No results found</div>';
    return;
  }
  items.forEach(it => listing.appendChild(createVendorCard(it)));
}

/* ---------- Filter / Search ---------- */
const searchInput = document.getElementById('search-input');
const sortSelect = document.getElementById('sort');

function filterAndRender(){
  const q = searchInput.value.trim().toLowerCase();
  const activeChip = document.querySelector('.chip.active').dataset.cat;
  let filtered = DATA.filter(d=>{
    const inCat = activeChip === 'All' ? true : d.tags.includes(activeChip);
    const inQ = q ? (d.name.toLowerCase().includes(q) || d.tags.join(' ').toLowerCase().includes(q)) : true;
    return inCat && inQ;
  });

  const sort = sortSelect.value;
  if(sort === 'price_low') filtered.sort((a,b)=>a.price-b.price);
  else if(sort === 'price_high') filtered.sort((a,b)=>b.price-a.price);
  else filtered.sort((a,b)=>b.rating - a.rating);

  renderListing(filtered);
}

/* wire search and sort */
searchInput.addEventListener('input', debounce(filterAndRender, 180));
sortSelect.addEventListener('change', filterAndRender);

/* initial render */
renderListing(DATA);

/* ---------- Cart logic (local, demo) ---------- */
let cart = JSON.parse(localStorage.getItem('pooja_cart') || '[]');

function saveCart(){ localStorage.setItem('pooja_cart', JSON.stringify(cart)); updateCartUI(); }
function updateCartUI(){
  const cartItemsEl = document.getElementById('cartItems');
  cartItemsEl.innerHTML = '';
  if(cart.length === 0){
    cartItemsEl.innerHTML = '<div class="center muted">No items yet — add from the list</div>';
  } else {
    cart.forEach(entry=>{
      const item = DATA.find(d=>d.id === entry.id);
      const row = document.createElement('div');
      row.className = 'cart-row';
      row.innerHTML = `
        <div class="left">
          <img src="${item.img}" alt="${item.name}">
          <div>
            <div style="font-weight:700">${item.name}</div>
            <div class="small muted">Qty: ${entry.qty}</div>
          </div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:700">${formatPrice(item.price * entry.qty)}</div>
          <div style="margin-top:6px"><button data-remove="${entry.id}" style="padding:6px;border-radius:8px;border:1px solid #ddd;background:#fff">Remove</button></div>
        </div>`;
      cartItemsEl.appendChild(row);
    });

    cartItemsEl.querySelectorAll('[data-remove]').forEach(btn=>{
      btn.addEventListener('click', (ev)=>{
        const id = ev.currentTarget.getAttribute('data-remove');
        cart = cart.filter(c=>c.id !== id);
        saveCart();
      });
    });
  }

  const total = cart.reduce((s,e)=> {
    const item = DATA.find(d=>d.id===e.id);
    return s + (item ? item.price * e.qty : 0);
  }, 0);
  document.getElementById('cartTotal').textContent = formatPrice(total);
  document.getElementById('cartCount').textContent = cart.reduce((s,e)=>s+e.qty, 0);
}

/* add to cart */
document.addEventListener('click', (ev)=>{
  if(ev.target.matches('.btn-add')){
    const id = ev.target.getAttribute('data-id');
    const existing = cart.find(c=>c.id===id);
    if(existing) existing.qty += 1; else cart.push({ id, qty: 1 });
    saveCart();
  }
  if(ev.target.matches('[data-view]')){
    const id = ev.target.getAttribute('data-view');
    // open a small modal / alert with detail (simple)
    const item = DATA.find(d=>d.id===id);
    alert(item.name + "\\n\\n" + item.tags.join(', ') + "\\nPrice: " + formatPrice(item.price) + "\\nRating: " + item.rating + "\\nETA: " + item.eta);
  }
});

/* checkout demo */
document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  if(cart.length === 0){ alert('Cart is empty'); return; }
  const order = { ts: new Date().toISOString(), items: cart };
  const orders = JSON.parse(localStorage.getItem('pooja_orders') || '[]');
  orders.push(order);
  localStorage.setItem('pooja_orders', JSON.stringify(orders));
  cart = []; saveCart();
  alert('Order saved locally (demo). You can wire this to a backend or Google Sheet.');
});

/* remove handlers from cart (delegated by updateCartUI) handled above */

/* init cart UI */
updateCartUI();

/* ---------- utility ---------- */
function debounce(fn, ms=200){
  let t;
  return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), ms); }
}

/* initial category selection highlight done above; allow keyboard "/" to focus search */
document.addEventListener('keydown', (e)=>{
  if(e.key === '/') { e.preventDefault(); searchInput.focus(); }
});
</script>

</body>
</html>
